authorization {
    (post: Blog.Post) {
        creator: Jinaga.User [
            creator = post->site: Blog.Site->creator: Jinaga.User
        ]
    } => creator
    (deleted: Blog.Post.Deleted) {
        creator: Jinaga.User [
            creator = deleted->post: Blog.Post->site: Blog.Site->creator: Jinaga.User
        ]
    } => creator
    (publish: Blog.Post.Publish) {
        creator: Jinaga.User [
            creator = publish->post: Blog.Post->site: Blog.Site->creator: Jinaga.User
        ]
    } => creator
    (title: Blog.Post.Title) {
        creator: Jinaga.User [
            creator = title->post: Blog.Post->site: Blog.Site->creator: Jinaga.User
        ]
    } => creator
    (site: Blog.Site) {
        creator: Jinaga.User [
            creator = site->creator: Jinaga.User
        ]
    } => creator
    (domain: Blog.Site.Domain) {
        creator: Jinaga.User [
            creator = domain->site: Blog.Site->creator: Jinaga.User
        ]
    } => creator
    (name: Blog.Site.Name) {
        creator: Jinaga.User [
            creator = name->site: Blog.Site->creator: Jinaga.User
        ]
    } => creator
    (name: Blog.User.Name) {
        user: Jinaga.User [
            user = name->user: Jinaga.User
        ]
    } => user
    any Jinaga.User
}

distribution {
    share (user: Jinaga.User) {
        name: Blog.User.Name [
            name->user: Jinaga.User = user
            !E {
                next: Blog.User.Name [
                    next->prior: Blog.User.Name = name
                ]
            }
        ]
    } => name
    with (user: Jinaga.User) {
    } => user
    share (user: Jinaga.User) {
        site: Blog.Site [
            site->creator: Jinaga.User = user
            !E {
                deleted: Blog.Site.Deleted [
                    deleted->site: Blog.Site = site
                    !E {
                        restored: Blog.Site.Restored [
                            restored->deleted: Blog.Site.Deleted = deleted
                        ]
                    }
                ]
            }
            !E {
                purged: Blog.Site.Purged [
                    purged->deleted: Blog.Site.Deleted->site: Blog.Site = site
                ]
            }
        ]
    } => {
        domains = {
            domain: Blog.Site.Domain [
                domain->site: Blog.Site = site
                !E {
                    next: Blog.Site.Domain [
                        next->prior: Blog.Site.Domain = domain
                    ]
                }
            ]
        } => domain
        names = {
            name: Blog.Site.Name [
                name->site: Blog.Site = site
                !E {
                    next: Blog.Site.Name [
                        next->prior: Blog.Site.Name = name
                    ]
                }
            ]
        } => name
        site = site
    }
    with (user: Jinaga.User) {
    } => user
    share (site: Blog.Site) {
        name: Blog.Site.Name [
            name->site: Blog.Site = site
            !E {
                next: Blog.Site.Name [
                    next->prior: Blog.Site.Name = name
                ]
            }
        ]
    } => name
    with (site: Blog.Site) {
        creator: Jinaga.User [
            creator = site->creator: Jinaga.User
        ]
    } => creator
    share (site: Blog.Site) {
        domain: Blog.Site.Domain [
            domain->site: Blog.Site = site
            !E {
                next: Blog.Site.Domain [
                    next->prior: Blog.Site.Domain = domain
                ]
            }
        ]
    } => domain
    with (site: Blog.Site) {
        creator: Jinaga.User [
            creator = site->creator: Jinaga.User
        ]
    } => creator
    share (site: Blog.Site) {
        post: Blog.Post [
            post->site: Blog.Site = site
            !E {
                deleted: Blog.Post.Deleted [
                    deleted->post: Blog.Post = post
                    !E {
                        restored: Blog.Post.Restored [
                            restored->deleted: Blog.Post.Deleted = deleted
                        ]
                    }
                ]
            }
        ]
    } => {
        post = post
        titles = {
            title: Blog.Post.Title [
                title->post: Blog.Post = post
                !E {
                    next: Blog.Post.Title [
                        next->prior: Blog.Post.Title = title
                    ]
                }
            ]
        } => title
    }
    with (site: Blog.Site) {
        creator: Jinaga.User [
            creator = site->creator: Jinaga.User
        ]
    } => creator
    share (post: Blog.Post) {
        title: Blog.Post.Title [
            title->post: Blog.Post = post
            !E {
                next: Blog.Post.Title [
                    next->prior: Blog.Post.Title = title
                ]
            }
        ]
    } => title
    with (post: Blog.Post) {
        creator: Jinaga.User [
            creator = post->site: Blog.Site->creator: Jinaga.User
        ]
    } => creator
}
purge {
    (fact: Blog.Site) {
        purged: Blog.Site.Purged [
            purged->deleted: Blog.Site.Deleted->site: Blog.Site = fact
        ]
    }
}
